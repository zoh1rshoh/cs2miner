<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CS2 Mining Bot</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg-color: #0d1117;
            --text-color: #ffffff;
            --secondary-text: #8b949e;
            --accent-color: #58a6ff;
            --energy-bar-bg: #30363d;
            --energy-fill: linear-gradient(90deg, #eebb00, #ff8800);
            --nav-bg: #161b22;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Rajdhani', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow: hidden;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* --- Header Section --- */
        .header {
            padding-top: 20px;
            text-align: center;
            flex-shrink: 0;
        }

        .session-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--secondary-text);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .session-balance {
            font-size: 48px;
            font-weight: 700;
            color: var(--text-color);
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }

        /* --- Main Mining Area --- */
        .mining-area {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            padding: 20px 0;
        }

        .coin-container {
            position: relative;
            width: 280px;
            height: 280px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Moviy aylananing porlashi */
        .glow-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 4px solid var(--accent-color);
            box-shadow: 0 0 30px var(--accent-color), inset 0 0 20px rgba(88, 166, 255, 0.3);
            pointer-events: none;
        }

        /* Tanga tugmasi */
        .coin-btn {
            width: 90%;
            height: 90%;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.1s ease;
            z-index: 10;
            /* Tanga rasmi */
            background-image: url('https://i.imgur.com/8Ql4y7X.png'); /* Bu yerga o'z rasmingiz manzilini qo'ying */
            background-size: cover;
            background-position: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        .coin-btn:active {
            transform: scale(0.96);
        }

        /* Uchib chiquvchi raqamlar animatsiyasi */
        .floater {
            position: absolute;
            color: var(--text-color);
            font-weight: bold;
            font-size: 28px;
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
            z-index: 20;
            text-shadow: 0 0 5px var(--accent-color);
        }

        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-120px) scale(1.2); }
        }

        /* --- Energy Section --- */
        .energy-section {
            padding: 0 30px 20px 30px;
            flex-shrink: 0;
        }

        .energy-info {
            display: flex;
            justify-content: space-between;
            font-size: 16px;
            font-weight: 600;
            color: var(--secondary-text);
            margin-bottom: 8px;
        }

        .energy-bar-bg {
            width: 100%;
            height: 14px;
            background-color: var(--energy-bar-bg);
            border-radius: 7px;
            overflow: hidden;
        }

        .energy-fill {
            height: 100%;
            width: 100%; /* Boshlanishida to'la */
            background: var(--energy-fill);
            border-radius: 7px;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px rgba(255, 136, 0, 0.5);
        }

        /* --- Bottom Navigation --- */
        .bottom-nav {
            display: flex;
            justify-content: space-around;
            background-color: var(--nav-bg);
            padding: 10px 0;
            border-top: 1px solid #30363d;
            flex-shrink: 0;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--secondary-text);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: color 0.2s;
            width: 25%;
        }

        .nav-item i {
            font-size: 22px;
            margin-bottom: 4px;
        }

        .nav-item.active {
            color: var(--accent-color);
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="session-title">Session Earnings</div>
        <div class="session-balance" id="score">150.50</div>
    </div>

    <div class="mining-area">
        <div class="coin-container">
            <div class="glow-ring"></div>
            <div class="coin-btn" id="coinBtn"></div>
        </div>
    </div>

    <div class="energy-section">
        <div class="energy-info">
            <div><i class="fas fa-bolt" style="color: #ffaa00;"></i> Energy</div>
            <div id="energy-txt">1000/1000</div>
        </div>
        <div class="energy-bar-bg">
            <div class="energy-fill" id="energy-bar"></div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="setActiveNav(this, 'mine')">
            <i class="fas fa-gavel"></i>
            <span>Mine</span>
        </div>
        <div class="nav-item" onclick="setActiveNav(this, 'skins')">
            <i class="fas fa-tshirt"></i>
            <span>Skins</span>
        </div>
        <div class="nav-item" onclick="setActiveNav(this, 'invite')">
            <i class="fas fa-user-friends"></i>
            <span>Invite Friends</span>
        </div>
        <div class="nav-item" onclick="setActiveNav(this, 'profile')">
            <i class="fas fa-user"></i>
            <span>Profile</span>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // O'yin o'zgaruvchilari
        let score = 150.50;
        let energy = 1000;
        const maxEnergy = 1000;
        const clickValue = 0.50; // Har bir bosishda qancha qo'shilishi
        const energyCost = 5; // Har bir bosishda qancha energiya ketishi

        // Elementlarni olish
        const scoreEl = document.getElementById('score');
        const coinBtn = document.getElementById('coinBtn');
        const energyBar = document.getElementById('energy-bar');
        const energyTxt = document.getElementById('energy-txt');

        // Tanga bosish hodisasi
        coinBtn.addEventListener('touchstart', handleTap, { passive: false });
        coinBtn.addEventListener('click', handleTap);

        function handleTap(e) {
            // Agar touch hodisasi bo'lsa, default harakatni to'xtatish (zoom va scrollni oldini olish uchun)
            if (e.type === 'touchstart') {
                 e.preventDefault();
            }
            
            if (energy < energyCost) {
                tg.showAlert("âš¡ Not enough energy! Please wait.");
                return;
            }

            // Hisobni va energiyani yangilash
            score += clickValue;
            energy -= energyCost;
            updateUI();

            // Vibratsiya (Haptic Feedback)
            if (tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('medium');
            }

            // Animatsiya uchun bosilgan joy koordinatalarini olish
            let x, y;
            if (e.type === 'touchstart') {
                const touch = e.touches[0] || e.changedTouches[0];
                x = touch.clientX;
                y = touch.clientY;
            } else {
                x = e.clientX;
                y = e.clientY;
            }
            createFloater(x, y);
            
            // Ma'lumotni botga yuborish (ixtiyoriy: har 10 marta bosganda yoki ma'lum vaqtda yuborish yaxshiroq)
            // sendDataToBot(); 
        }

        // Uchib chiquvchi raqam funksiyasi
        function createFloater(x, y) {
            const el = document.createElement('div');
            el.className = 'floater';
            el.innerText = '+' + clickValue.toFixed(2);
            el.style.left = `${x}px`;
            el.style.top = `${y}px`;
            document.body.appendChild(el);

            setTimeout(() => el.remove(), 1000);
        }

        // UI ni yangilash funksiyasi
        function updateUI() {
            scoreEl.innerText = score.toFixed(2);
            energyTxt.innerText = `${energy}/${maxEnergy}`;
            const energyPercent = (energy / maxEnergy) * 100;
            energyBar.style.width = `${energyPercent}%`;
        }

        // Energiyani qayta tiklash (har soniyada)
        setInterval(() => {
            if (energy < maxEnergy) {
                energy += 2; // Har soniyada 2 energiya qo'shiladi
                if (energy > maxEnergy) energy = maxEnergy;
                updateUI();
            }
        }, 1000);
        
        // Ma'lumotni botga yuborish funksiyasi (Bot yopilayotganda chaqirilishi mumkin)
        function sendDataToBot() {
            tg.sendData(score.toFixed(2));
        }
        
        // Bot yopilganda ma'lumotni saqlash
        tg.onEvent('mainButtonClicked', sendDataToBot);
        tg.onEvent('popupClosed', sendDataToBot);

        // Navigatsiya menyusini boshqarish
        function setActiveNav(element, section) {
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            element.classList.add('active');
            // Bu yerda boshqa bo'limlarga o'tish logikasini yozishingiz mumkin
            // Masalan: if(section === 'skins') { ... }
            console.log("Navigated to:", section);
        }

        // Boshlang'ich UI holatini o'rnatish
        updateUI();

    </script>
</body>
</html>
